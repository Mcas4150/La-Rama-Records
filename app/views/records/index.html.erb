
  <div class="main" style="margin-top:7.5em;">
<div class="container" style="margin-top:2.5em;">

<div style="border-radius:5px;" class="hidden-xs">
<iframe src="https://snapwidget.com/embed/459159" class="snapwidget-widget" allowTransparency="true" frameborder="0" scrolling="no" style="border-radius: 3px; overflow:hidden; width:100%; height:300px"></iframe>
</div>
<div class="hidden-sm hidden-md hidden-lg hidden-xl" style="width:100%;"><img style="width:100%;" src = "https://i.imgur.com/QWJUFbC.png"></div>

</div>
<% content_for :title do %>Instant-search<% end %>


<div class="container">
  <div class="row">
    <div class="col-sm-3">
      <input type="text" id="q" class="form-control" />
    </div>
    <div class="col-sm-6">
      <div id="pagination"></div>
    </div>
    <!-- <div class="col-sm-3">
      <div id="sort-by-container"></div>
    </div> -->
  </div>


  <div class="row">
    <div class="col-sm-3 sideshow" id="facets">
      <div id="genre"></div>
      <div id="prices"></div>
    </div>
    <div class="col-sm-9"><div class="records-display" id="hits"></div></div>
 </div>
</div>
</div>
<script src="//cdn.jsdelivr.net/instantsearch.js/1/instantsearch.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    var hitTemplate =
    ' <div class="col-xs-6 col-sm-4 col-md-3 col-lg-2 disc">' +
  "<a href='/records/{{id}}'>"+
  " <div class='seletak picha'>" +

  "<img src = '{{photo}}' class='imag myImg' > " +
    '<div class="overlay2 type">' +
      " <div class='text yells'>{{genre}}</div> " +
    '</div>' +
   '</div>' +
   '<div class="row descr">' +
  '<div class="infoo card-body munch col-9">' +
  '<p>{{{_highlightResult.artist.value}}}</p>' +
  '<p>{{index}}</p>' +
   '<h2>{{{_highlightResult.name.value}}}</h2>' +
  '</div>' +
  '</div>' +
   '</a>' +
  '</div>'



    var search = instantsearch({
      appId: '<%= ENV['ALGOLIASEARCH_APPLICATION_ID'] %>',
      apiKey: '<%= ENV['ALGOLIASEARCH_API_KEY_SEARCH'] %>',
      indexName: 'Record',
      urlSync: true
    });

    search.addWidget(
      instantsearch.widgets.searchBox({
        container: '#q',
        placeholder: 'Type Anything',
        autofocus: false,
        poweredBy: false
      })
    );

    search.addWidget(
      instantsearch.widgets.hits({
        container: '#hits',
        templates: {
          empty: 'No results',
          item: hitTemplate
        },
        hitsPerPage: 10
      })
    );

    search.addWidget(
      instantsearch.widgets.pagination({
          container: '#pagination',
          maxPages: 10
          })
        );

  //   search.addWidget(
  // instantsearch.widgets.sortBySelector({
  //   container: '#sort-by-container',
  //   index: 'price_cents'
  //   })
  //   );


//       search.addWidget(
//         instantsearch.widgets.priceRanges({
//           container: '#prices',
//           attributeName: 'price_cents',
//         })
//       );

// //

search.addWidget(
  instantsearch.widgets.rangeSlider({
    container: '#prices',
    attributeName: 'price_cents',
    pips: false,
    tooltips: {
      format: function(rawValue) {
        return '$' + Math.round(rawValue).toLocaleString();
      }
    }
  })
);


    search.addWidget(
      instantsearch.widgets.refinementList({
        container: '#genre',
        attributeName: 'genre',
        limit: 12,
        cssClasses: {
          root: 'list-group',
          item: 'list-group-item',
          count: 'badge pull-right'
        }
      })
    );

    search.start();
  });
</script>

